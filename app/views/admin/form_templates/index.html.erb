<!-- app/views/admin/form_templates/index.html.erb -->

<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>Templates de Formulários</h1>
    <div class="d-flex gap-2">
      <%= link_to 'Novo Template', new_admin_form_template_path, class: 'btn btn-primary' %>
      <%= link_to 'Voltar ao Dashboard', admin_root_path, class: 'btn btn-secondary' %>
    </div>
  </div>

  <% if @form_templates.any? %>
    <div class="table-responsive">
      <table class="table table-hover">
        <thead class="table-dark">
          <tr>
            <th>Nome</th>
            <th>Descrição</th>
            <th>Campos</th>
            <th>Criado em</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          <% @form_templates.each do |template| %>
            <tr>
              <td><strong><%= template.name %></strong></td>
              <td><%= truncate(template.description, length: 50) %></td>
              <td><span class="badge bg-info"><%= template.form_template_fields.count %></span></td>
              <td><%= l(template.created_at, format: :short) %></td>
              <td>
                <%= link_to 'Ver', admin_form_template_path(template), class: 'btn btn-sm btn-info' %>
                <%= link_to 'Editar', edit_admin_form_template_path(template), class: 'btn btn-sm btn-warning' %>
                <%= button_to 'Deletar', admin_form_template_path(template), method: :delete, 
                onclick: "return confirm('Tem certeza que deseja apagar este template?');",
                class: 'btn btn-link text-danger p-0 border-0 text-decoration-none align-baseline',
                form: { style: 'display:inline-block;' } %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  <% else %>
    <div class="alert alert-info">
      <strong>Nenhum template criado ainda.</strong>
      <%= link_to 'Criar seu primeiro template', new_admin_form_template_path, class: 'alert-link' %>
    </div>
  <% end %>

  <div class="mt-4">
    <%= link_to 'Voltar ao Dashboard', admin_root_path, class: 'btn btn-secondary' %>
  </div>
</div>
