<!-- app/views/admin/dashboard/index.html.erb -->

<div class="container py-5">

  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-5 border-bottom pb-3">
    <div>
      <h1 class="fw-bold">Painel Administrativo</h1>
      <p class="text-muted mt-1">Gerencie usu치rios, formul치rios e integra칞칫es do sistema</p>
    </div>

    <%= button_to 'Sair', destroy_user_session_path, 
        method: :delete, 
        class: 'btn btn-outline-danger btn-lg rounded-pill px-4' %>
  </div>


  <!-- STAT CARDS -->
  <div class="row g-4 mb-5">

    <div class="col-md-6">
      <div class="card shadow-sm border-0 h-100">
        <div class="card-body py-4 px-4">
          <h6 class="text-uppercase text-muted fw-semibold">Total de Usu치rios</h6>
          <h2 class="fw-bold mt-2"><%= @total_users %></h2>
        </div>
      </div>
    </div>

    <div class="col-md-6">
      <div class="card shadow-sm border-0 h-100">
        <div class="card-body py-4 px-4">
          <h6 class="text-uppercase text-muted fw-semibold">Total de Admins</h6>
          <h2 class="fw-bold mt-2"><%= @admin_count %></h2>
        </div>
      </div>
    </div>

  </div>


  <!-- ACTION SECTIONS -->
  <div class="row g-4">

    <!-- Import section -->
    <div class="col-12">
      <div class="p-4 rounded-4 shadow-sm bg-light border">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <h5 class="fw-bold mb-1">游닋 Importar Dados do SIGAA</h5>
            <p class="mb-0 text-muted">Importe turmas e alunos a partir de um arquivo JSON</p>
          </div>

          <%= link_to 'Importar', 
              admin_imports_path, 
              class: 'btn btn-primary btn-lg rounded-pill px-4' %>
        </div>
      </div>
    </div>

    <!-- Templates -->
    <div class="col-12">
      <div class="p-4 rounded-4 shadow-sm bg-light border">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <h5 class="fw-bold mb-1">游늶 Gerenciar Templates de Formul치rios</h5>
            <p class="mb-0 text-muted">Crie e gerencie modelos reutiliz치veis</p>
          </div>

          <%= link_to 'Acessar', 
              admin_form_templates_path, 
              class: 'btn btn-primary btn-lg rounded-pill px-4' %>
        </div>
      </div>
    </div>

    <!-- Forms -->
    <div class="col-12">
      <div class="p-4 rounded-4 shadow-sm bg-light border">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <h5 class="fw-bold mb-1">游늶 Gerenciar Formul치rios</h5>
            <p class="mb-0 text-muted">Crie e atribua formul치rios 맙 turmas</p>
          </div>

          <%= link_to 'Acessar', 
              admin_forms_path, 
              class: 'btn btn-primary btn-lg rounded-pill px-4' %>
        </div>
      </div>
    </div>

  </div>


  <!-- RECENT USERS TABLE -->
  <div class="mt-5 pt-4 border-top">
    <h2 class="fw-bold mb-3">Usu치rios Recentes</h2>

    <div class="table-responsive shadow-sm rounded-4 overflow-hidden">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-dark">
          <tr>
            <th>Nome</th>
            <th>Email</th>
            <th>Role</th>
          </tr>
        </thead>

        <tbody>
          <% @users.each do |user| %>
            <tr>
              <td class="fw-semibold"><%= user.name %></td>
              <td><%= user.email %></td>
              <td>
                <span class="badge bg-<%= user.role == 'admin' ? 'danger' : 'primary' %> px-3 py-2">
                  <%= user.role.capitalize %>
                </span>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

  </div>

</div>
